<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rose Garden</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #4a148c 0%, #6a1b9a 50%, #8e24aa 100%);
      min-height: 100vh;
      font-family: 'Georgia', serif;
      overflow-x: hidden;
      padding-bottom: 80px;
      position: relative;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #4a148c 0%, #6a1b9a 50%, #8e24aa 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      transition: opacity 1s ease-out;
    }

    .loading-rose {
      font-size: 4rem;
      animation: spin 2s linear infinite;
      margin-bottom: 20px;
    }

    .loading-text {
      color: white;
      font-size: 1.5rem;
      text-align: center;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    .loading-screen.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    /* Stars Background */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.8;
      animation: twinkle 3s infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* Music Button - Floating Button */
    .music-button {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #ff69b4, #ff1493);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 4px 20px rgba(255, 20, 147, 0.4);
      border: 3px solid rgba(255, 255, 255, 0.3);
    }

    .music-button:hover {
      transform: scale(1.1) rotate(5deg);
      background: linear-gradient(135deg, #ff1493, #dc143c);
      box-shadow: 0 8px 30px rgba(255, 20, 147, 0.6);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .music-button:active {
      transform: scale(0.95);
    }

    .music-button-icon {
      font-size: 1.5rem;
      color: white;
      animation: musicPulse 2s ease-in-out infinite;
    }

    @keyframes musicPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .music-button.playing .music-button-icon {
      animation: musicSpin 4s linear infinite;
    }

    @keyframes musicSpin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Music Popup */
    .music-popup {
      position: fixed;
      top: 90px;
      right: 20px;
      background: rgba(255, 255, 255, 0.15);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      width: 320px;
      padding: 25px;
      z-index: 999;
      backdrop-filter: blur(20px);
      transform: translateY(-20px) scale(0.8);
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .music-popup.show {
      transform: translateY(0) scale(1);
      opacity: 1;
      visibility: visible;
    }

    .music-popup::before {
      content: '';
      position: absolute;
      top: -10px;
      right: 30px;
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-bottom: 10px solid rgba(255, 255, 255, 0.15);
    }

    .music-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      color: white;
      font-weight: bold;
      font-size: 1.1rem;
    }

    .close-popup {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .close-popup:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(90deg);
    }

    .background-music-selector select {
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid #ff69b4;
      border-radius: 12px;
      padding: 10px 15px;
      font-size: 0.9rem;
      color: #c71585;
      cursor: pointer;
      outline: none;
      width: 100%;
      margin-bottom: 15px;
      transition: all 0.3s ease;
    }

    .background-music-selector select:hover {
      border-color: #ff1493;
      box-shadow: 0 0 10px rgba(255, 105, 180, 0.3);
    }

    .background-controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      align-items: center;
      margin-bottom: 15px;
    }

    .bg-control-btn {
      background: linear-gradient(135deg, #ff69b4, #ff1493);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: bold;
      transition: all 0.3s ease;
      flex: 1;
      position: relative;
      overflow: hidden;
    }

    .bg-control-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s ease;
    }

    .bg-control-btn:hover::before {
      left: 100%;
    }

    .bg-control-btn:hover {
      background: linear-gradient(135deg, #ff1493, #dc143c);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 20, 147, 0.4);
    }

    .bg-control-btn:disabled {
      background: linear-gradient(135deg, #ccc, #999);
      cursor: not-allowed;
      transform: none;
    }

    .bg-control-btn:disabled::before {
      display: none;
    }

    .bg-now-playing {
      color: white;
      font-size: 0.8rem;
      font-style: italic;
      text-align: center;
      opacity: 0.9;
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Background Music */
    .background-music {
      display: none;
    }

    /* Main Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      position: relative;
      z-index: 3;
    }

    .title {
      text-align: center;
      font-size: 3.5rem;
      color: white;
      margin-bottom: 50px;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
      animation: titleGlow 3s ease-in-out infinite;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .title:hover {
      transform: scale(1.05);
      text-shadow: 2px 2px 20px rgba(255,255,255,0.7);
    }

    /* Hidden Popup Message */
    .title-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,240,250,0.95));
      padding: 30px 40px;
      border-radius: 25px;
      border: 3px solid #ff69b4;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      z-index: 6000;
      max-width: 400px;
      text-align: center;
      backdrop-filter: blur(20px);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .title-popup.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    .title-popup p {
      color: #b30059;
      font-size: 1.1rem;
      line-height: 1.6;
      font-style: italic;
      margin-bottom: 20px;
    }

    @keyframes titleGlow {
      0%, 100% { text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }
      50% { text-shadow: 2px 2px 20px rgba(255,255,255,0.5); }
    }

    /* Roses Container */
    .roses-container {
      display: flex;
      flex-direction: row;
      gap: 40px;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      flex-wrap: wrap;
    }

    .rose-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 20px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .rose-wrapper:hover {
      transform: scale(1.05);
      background: rgba(255, 255, 255, 0.15);
    }

    .rose-wrapper:active {
      transform: scale(0.98);
      background: rgba(74, 20, 140, 0.6);
      border: 1px solid rgba(142, 36, 170, 0.8);
    }

    .rose {
      position: relative;
      width: 120px;
      height: 200px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .rose-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 15px;
      filter: drop-shadow(0 8px 16px rgba(0,0,0,0.3));
      animation: roseBloom 4s ease-in-out infinite;
      transition: transform 0.3s ease;
    }

    .rose-image.emoji {
      object-fit: contain;
      font-size: 6rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0;
    }

    .rose-image:hover {
      transform: scale(1.1);
    }

    @keyframes roseBloom {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.05) rotate(2deg); }
    }

    .rose-label {
      color: white;
      font-size: 1.3rem;
      font-weight: bold;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
      text-align: center;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 5000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,240,250,0.95));
      margin: 5% auto;
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      position: relative;
      animation: modalSlideIn 0.5s ease-out;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.3);
    }

    @keyframes modalSlideIn {
      from { opacity: 0; transform: translateY(-50px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.3s;
    }

    .close:hover { color: #ff1493; }

    .modal h2 {
      color: #c71585;
      margin-bottom: 20px;
      text-align: center;
      font-size: 2rem;
    }

    .heart {
      animation: heartbeat 1.5s ease-in-out infinite;
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    .message {
      background: linear-gradient(135deg, #ff69b4, #ff1493);
      color: white;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 20px;
      font-size: 1.1rem;
      text-align: center;
      font-style: italic;
    }

    .user-message {
      display: none;
      margin-top: 15px;
      padding: 15px 20px;
      background: rgba(255, 240, 250, 0.9);
      border-left: 4px solid #ff99cc;
      border-radius: 12px;
      font-style: italic;
      font-family: 'Cursive', serif;
      color: #b30059;
      animation: fadeIn 0.4s ease-in-out;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .add-message-btn {
      margin-top: 15px;
      padding: 10px 20px;
      background: linear-gradient(135deg, #ffe0f0, #ffcce5);
      border: 1px solid #ff99cc;
      border-radius: 25px;
      font-weight: bold;
      color: #c71585;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .add-message-btn:hover {
      background: linear-gradient(135deg, #ffcce5, #ffb3d9);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 153, 204, 0.3);
    }

    .photo-container {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      justify-content: center;
      flex-wrap: wrap;
    }

    .photo {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 15px;
      border: 3px solid #ff99cc;
      transition: transform 0.3s ease;
      cursor: pointer;
    }

    .photo:hover {
      transform: scale(1.1);
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 60px 20px 40px;
      font-family: cursive;
      color: #fff;
      opacity: 0.9;
      position: relative;
      z-index: 3;
    }

    footer p {
      margin-bottom: 15px;
      font-size: 1.1rem;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
    }

    .footer-message-container {
      margin: 20px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }

    .message-icon {
      font-size: 2rem;
      cursor: pointer;
      transition: transform 0.3s ease;
      animation: bounce 2s infinite;
    }

    .message-icon:hover {
      transform: scale(1.2);
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .title { font-size: 2.5rem; }
      .modal-content { margin: 10% auto; padding: 20px; }
      .rose { width: 100px; height: 160px; }
      .roses-container { 
        flex-direction: column; 
        gap: 30px; 
      }
      
      .music-popup {
        width: 280px;
        right: 10px;
      }
      
      .music-button {
        width: 50px;
        height: 50px;
        right: 15px;
      }
    }
  </style>
</head>

<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-rose">🌹</div>
    <div class="loading-text">
      My love letter to...the baddest I know 💜<br>
      <small>Usiblash sana</small>
    </div>
  </div>

  <!-- Hidden Title Popup -->
  <div class="title-popup" id="titlePopup">
    <p>Remember I used to call you this and you would blash about it.💜😂😌good times at times</p>
    <p>Into yo like I'm a driller.</p>
  </div>

  <!-- Background Music (Keep this exactly where it is) -->
  <audio id="globalAudio" loop class="background-music" preload="auto">
    <source src="assets/audio/PARTYNEXTDOOR - Dreamin.mp3" type="audio/mpeg">
  </audio>

  <!-- Music Button -->
  <div class="music-button" id="musicButton" onclick="toggleMusicPopup()">
    <div class="music-button-icon">🎵</div>
  </div>

  <!-- Music Popup -->
  <div class="music-popup" id="musicPopup">
    <div class="music-header">
      <span>🎵 Music Player</span>
      <button class="close-popup" onclick="toggleMusicPopup()">×</button>
    </div>
    <div class="background-music-selector">
      <select id="globalMusicSelect" onchange="selectGlobalSong(this.value)">
        <option value="PARTYNEXTDOOR - Dreamin.mp3">Dreamin' - PARTYNEXTDOOR</option>
        <option value="PARTYNEXTDOOR-TRAUMA">PARTYNEXTDOOR-TRAUMA</option>
        <option value="song3.mp3">Golden - Jill Scott</option>
        <option value="song4.mp3">Adorn - Miguel</option>
        <option value="song5.mp3">Come Through - H.E.R.</option>
        <option value="song6.mp3">Stay Ready - Jhené Aiko</option>
        <option value="song7.mp3">Love Galore - SZA</option>
      </select>
    </div>
    <div class="background-controls">
      <button class="bg-control-btn" id="globalPlayBtn" onclick="toggleGlobalMusic()">▶️ Play</button>
      <button class="bg-control-btn" onclick="stopGlobalMusic()">⏹️ Stop</button>
    </div>
    <div class="bg-now-playing" id="globalNowPlaying">Ready: Dreamin' - PARTYNEXTDOOR</div>
  </div>

  <!-- Stars Background -->
  <div class="stars" id="stars"></div>

  <div class="container">
    <h1 class="title" onclick="titleClick()">✨La Sam✨</h1>

    <div class="roses-container">
      <!-- Rose 1 -->
      <div class="rose-wrapper" onclick="openModal('modal1')">
        <div class="rose">
          <img class="rose-image" id="rose1Image" src="assets/images/rose-unsplash.jpg" alt="Rose 1">
        </div>
        <div class="rose-label">First Bloom</div>
      </div>

      <!-- Rose 2 -->
      <div class="rose-wrapper" onclick="openModal('modal2')">
        <div class="rose">
          <img class="rose-image" id="rose2Image" src="https://images.unsplash.com/photo-1561181286-d3fee7d55364?w=300&h=400&fit=crop" alt="Rose 2">
        </div>
        <div class="rose-label">Heart's Robbed</div>
      </div>

      <!-- Rose 3 -->
      <div class="rose-wrapper" onclick="openModal('modal3')">
        <div class="rose">
          <img class="rose-image" id="rose3Image" src="https://images.unsplash.com/photo-1563241527-3004b7be0ffd?w=300&h=400&fit=crop" alt="Rose 3">
        </div>
        <div class="rose-label">Forever</div>
      </div>
    </div>
  </div>

  <!-- MODALS -->
  <!-- Modal 1 -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal1')">&times;</span>
      <h2>First Bloom <span class="heart">💕</span></h2>
      <div class="message">"I think I'm a crack addict. frfr"</div>
      <button class="add-message-btn" onclick="showSavedMessage('msg1')">💌 Read Message</button>
      <div id="msg1" class="user-message">
        I saw you and I fell—suddenly, endlessly. Hit me too like a truck. Funny you still hit me like a truck no matter what the outcome. That smile on your face makes it easy to trust you. I swear na si mstari I literally skip a beat when I see a photo of you. Anyway nione mbleina tu nikisema izi vitu😂
      </div>
      <div class="photo-container">
        <img class="photo" src="assets/images/Crack.jpg" alt="Memory 1" onclick="enlargePhoto(this)">
        <img class="photo" src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=300&h=300&fit=crop" alt="Memory 2" onclick="enlargePhoto(this)">
      </div>
    </div>
  </div>

  <!-- Modal 2 -->
  <div id="modal2" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal2')">&times;</span>
      <h2>Heart's Robbed <span class="heart">💖</span></h2>
      <div class="message">"And I don't want it back you can keep it Make it dirty but keep it safe for me."</div>
      <button class="add-message-btn" onclick="showSavedMessage('msg2')">💌 Read Message</button>
      <div id="msg2" class="user-message">
        Can I tell you somethin' Crazy I never thought you'd be my type too since we met at the beginning. Till that day you came from school and I switched school. That was not naive the way we looked at each other we craved for each other. I saw you young at first. I said fuck dat from that day. My first real kiss I heard was with you. The one you saw on those opera😂
      </div>
      <div class="photo-container">
        <img class="photo" src="https://images.unsplash.com/photo-1492633423870-43d1cd2775eb?w=300&h=300&fit=crop" alt="Memory 3" onclick="enlargePhoto(this)">
        <img class="photo" src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=300&h=300&fit=crop" alt="Memory 4" onclick="enlargePhoto(this)">
      </div>
    </div>
  </div>

  <!-- Modal 3 -->
  <div id="modal3" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('modal3')">&times;</span>
      <h2>Forever <span class="heart">💝</span></h2>
      <div class="message">"Come to me. I will make you believe we're forever."</div>
      <button class="add-message-btn" onclick="showSavedMessage('msg3')">💌 Read Message</button>
      <div id="msg3" class="user-message">
        I promise never to hurt or make you feel any type of way. I don't even know if this makes you comfortable. I figured you'd like some of the things I'm good at even though not talking. This is just a taste of what I have in store for you. Forget how you know me. Let me show you some of the other me.
      </div>
      <div class="photo-container">
        <img class="photo" src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop" alt="Memory 5" onclick="enlargePhoto(this)">
        <img class="photo" src="https://images.unsplash.com/photo-1494790108755-2616c0763c65?w=300&h=300&fit=crop" alt="Memory 6" onclick="enlargePhoto(this)">
      </div>
    </div>
  </div>

  <!-- Photo Enlargement Modal -->
  <div id="photoModal" class="modal">
    <div class="modal-content" style="max-width: 80%; text-align: center;">
      <span class="close" onclick="closeModal('photoModal')">&times;</span>
      <img id="enlargedPhoto" style="max-width: 100%; max-height: 70vh; border-radius: 15px; margin-top: 20px;">
    </div>
  </div>

  <footer>
    <p>Girl you better fucking read every single letter from a-z🌹</p>
    <p>Made with 💖 by your favorite person</p>
    
    <div class="footer-message-container">
      <span class="message-icon" onclick="showSavedMessage('msg4')">💌</span>
    </div>
    
    <div id="msg4" class="user-message">
      I need you so much. I want you to get that bad. I'm no Drake nor PND but sure I can rock you. Give me the location. I learnt a thing or two since we met.😎
      I don't even know if I'm doing corny things here or if you'll even like it. Honestly if you like I don't mind looking like a geek.
      But I also feel this would have been sugar melon sweet if it was in better terms😅
      <p> <big>I just pressed the big red button😂</big></p>
      <p> Damn that big read button😖memories😌 Damn that big red button Started all dat. Couldnt resist I'm sorry. But who wouldnt, remember I asked what the fuk why does it taste like strawberrry pinapple punch😔Damn that
      big red button.</p>
      <p> Was gonna put it in a diamond pendant or somthin' I aint rich though, if you choose this a yelloe diamond dagger will get</p>
    </div>
  </footer>

  <script>
    const globalAudio = document.getElementById("globalAudio");
    const musicButton = document.getElementById("musicButton");
    const musicPopup = document.getElementById("musicPopup");
    let musicPopupVisible = false;
    let currentSong = "PARTYNEXTDOOR - Dreamin.mp3";

    // Initialize audio on page load
    window.addEventListener('load', function() {
      // Set up audio properties
      globalAudio.volume = 0.4;
      globalAudio.loop = true;
      
      // Start loading screen
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('fade-out');
        setTimeout(() => {
          document.getElementById('loadingScreen').style.display = 'none';
          initializeBackground();
          // Try to auto-play music after loading screen
          startAutoPlay();
        }, 1000);
      }, 2000);
    });

    // Auto-play function
    function startAutoPlay() {
      // Try to play automatically
      globalAudio.play().then(() => {
        // Success - music is playing
        musicButton.classList.add('playing');
        document.getElementById('globalPlayBtn').textContent = '⏸️ Pause';
        document.getElementById('globalNowPlaying').textContent = `Playing: ${getSongDisplayName(currentSong)}`;
      }).catch(error => {
        // Auto-play failed (most browsers block auto-play)
        console.log('Auto-play failed, user interaction required:', error);
        document.getElementById('globalNowPlaying').textContent = 'Click play to start music';
      });
    }

    // Get display name for song
    function getSongDisplayName(songFile) {
      const songNames = {
        'PARTYNEXTDOOR - Dreamin.mp3': 'Dreamin\' - PARTYNEXTDOOR',
        'song2.mp3': 'PARTYNEXTDOOR-TRAUMA',
        'song3.mp3': 'Golden - Jill Scott',
        'song4.mp3': 'Adorn - Miguel',
        'song5.mp3': 'Come Through - H.E.R.',
        'song6.mp3': 'Stay Ready - Jhené Aiko',
        'song7.mp3': 'Love Galore - SZA'
      };
      return songNames[songFile] || songFile.replace('.mp3', '');
    }

    // Music popup toggle
    function toggleMusicPopup() {
      musicPopupVisible = !musicPopupVisible;
      if (musicPopupVisible) {
        musicPopup.classList.add('show');
      } else {
        musicPopup.classList.remove('show');
      }
    }

    // Close popup when clicking outside
    document.addEventListener('click', function(event) {
      if (!musicButton.contains(event.target) && !musicPopup.contains(event.target)) {
        musicPopup.classList.remove('show');
        musicPopupVisible = false;
      }
    });

    // Global music functions
    function selectGlobalSong(songFile) {
      if (songFile) {
        const wasPlaying = !globalAudio.paused;
        
        globalAudio.src = `assets/audio/${songFile}`;
        globalAudio.volume = 0.4;
        currentSong = songFile;
        
        if (wasPlaying) {
          globalAudio.play().then(() => {
            document.getElementById('globalNowPlaying').textContent = `Playing: ${getSongDisplayName(songFile)}`;
            musicButton.classList.add('playing');
            document.getElementById('globalPlayBtn').textContent = '⏸️ Pause';
          }).catch(error => {
            console.log('Failed to play new song:', error);
            musicButton.classList.remove('playing');
            document.getElementById('globalPlayBtn').textContent = '▶️ Play';
            document.getElementById('globalNowPlaying').textContent = `Failed to load: ${getSongDisplayName(songFile)}`;
          });
        } else {
          document.getElementById('globalNowPlaying').textContent = `Ready: ${getSongDisplayName(songFile)}`;
        }
      }
    }

    function toggleGlobalMusic() {
      if (globalAudio.paused) {
        // Try to play
        globalAudio.play().then(() => {
          musicButton.classList.add('playing');
          document.getElementById('globalPlayBtn').textContent = '⏸️ Pause';
          document.getElementById('globalNowPlaying').textContent = `Playing: ${getSongDisplayName(currentSong)}`;
        }).catch(error => {
          console.log('Music play failed:', error);
          document.getElementById('globalNowPlaying').textContent = `Error: Could not play ${getSongDisplayName(currentSong)}`;
        });
      } else {
        // Pause the music
        globalAudio.pause();
        musicButton.classList.remove('playing');
        document.getElementById('globalPlayBtn').textContent = '▶️ Play';
        document.getElementById('globalNowPlaying').textContent = `Paused: ${getSongDisplayName(currentSong)}`;
      }
    }

    function stopGlobalMusic() {
      globalAudio.pause();
      globalAudio.currentTime = 0;
      musicButton.classList.remove('playing');
      document.getElementById('globalPlayBtn').textContent = '▶️ Play';
      document.getElementById('globalNowPlaying').textContent = `Stopped: ${getSongDisplayName(currentSong)}`;
    }

    // Handle music ended event
    globalAudio.addEventListener('ended', () => {
      musicButton.classList.remove('playing');
      document.getElementById('globalPlayBtn').textContent = '▶️ Play';
      document.getElementById('globalNowPlaying').textContent = `Finished: ${getSongDisplayName(currentSong)}`;
    });

    // Handle audio loading events
    globalAudio.addEventListener('loadstart', () => {
      document.getElementById('globalNowPlaying').textContent = 'Loading...';
    });

    globalAudio.addEventListener('canplaythrough', () => {
      if (globalAudio.paused) {
        document.getElementById('globalNowPlaying').textContent = `Ready: ${getSongDisplayName(currentSong)}`;
      }
    });

    globalAudio.addEventListener('error', (e) => {
      console.log('Audio error:', e);
      document.getElementById('globalNowPlaying').textContent = `Error loading: ${getSongDisplayName(currentSong)}`;
      musicButton.classList.remove('playing');
      document.getElementById('globalPlayBtn').textContent = '▶️ Play';
    });

    // Initialize background elements
    function initializeBackground() {
      createStars();
    }

    // Create twinkling stars
    function createStars() {
      const starsContainer = document.getElementById('stars');
      for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
        star.style.animationDelay = Math.random() * 3 + 's';
        starsContainer.appendChild(star);
      }
    }

    // Photo enlargement function
    function enlargePhoto(img) {
      const modal = document.getElementById('photoModal');
      const enlargedPhoto = document.getElementById('enlargedPhoto');
      enlargedPhoto.src = img.src;
      modal.style.display = 'block';
    }

    function openModal(id) {
      document.getElementById(id).style.display = "block";
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }

    window.onclick = function (event) {
      const modals = ["modal1", "modal2", "modal3", "photoModal"];
      for (let id of modals) {
        const modal = document.getElementById(id);
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    };

    function showSavedMessage(messageId) {
      const msg = document.getElementById(messageId);
      if (msg) {
        msg.style.display = 'block';
        // Add a gentle scroll to the message
        setTimeout(() => {
          msg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 100);
      }
    }

    // Title click functionality - Small thought bubble
    function titleClick() {
      const popup = document.getElementById('titlePopup');
      
      if (popup.classList.contains('show')) {
        popup.classList.remove('show');
      } else {
        popup.classList.add('show');
        // Auto-hide after 3 seconds
        setTimeout(() => {
          popup.classList.remove('show');
        }, 3000);
      }
      
      // Add a special effect to the title
      const title = document.querySelector('.title');
      title.style.transform = 'scale(1.1)';
      title.style.textShadow = '0 0 30px rgba(255,255,255,1)';
      
      setTimeout(() => {
        title.style.transform = 'scale(1)';
        title.style.textShadow = '2px 2px 10px rgba(0,0,0,0.3)';
      }, 300);
    }

    // Initialize audio when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      globalAudio.volume = 0.4;
      globalAudio.loop = true;
    });
  </script>

</body>
</html>